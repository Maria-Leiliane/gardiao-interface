<div class="dashboard" *ngIf="!loading">
  <h1 class="page-title">ğŸ‘‹ OlÃ¡, {{ user?.name }}!</h1>

  <div class="dashboard-grid">
    <!-- Mana Card -->
    <app-card title="Sua Mana" icon="âœ¨" subtitle="NÃ­vel {{ currentLevel }}">
      <div class="mana-section">
        <div class="mana-value">{{ mana?.balance || 0 }}</div>
        <div class="mana-bar">
          <div class="mana-fill" [style.width.%]="manaPercentage"></div>
        </div>
        <p class="text-muted">Continue completando hÃ¡bitos para subir de nÃ­vel!</p>
      </div>
    </app-card>

    <!-- Stats Cards -->
    <app-card title="HÃ¡bitos Ativos" icon="ğŸ¯">
      <div class="stat-number">{{ habits.length }}</div>
      <p class="text-muted">hÃ¡bitos cadastrados</p>
    </app-card>

    <app-card title="Desafios" icon="ğŸ†">
      <div class="stat-number">{{ challenges.length }}</div>
      <p class="text-muted">desafios disponÃ­veis</p>
    </app-card>
  </div>

  <!-- HÃ¡bitos do Dia -->
  <section class="section">
    <h2>ğŸ“‹ HÃ¡bitos de Hoje</h2>
    <div class="habit-list" *ngIf="habits.length > 0; else noHabits">
      <div class="habit-item" *ngFor="let habit of habits">
        <div class="habit-info">
          <strong>{{ habit.name }}</strong>
          <span class="badge badge-info">{{ habit.frequency || 'DiÃ¡rio' }}</span>
        </div>
        <app-button label="âœ“ Registrar" variant="primary" (clicked)="logHabit(habit.id!)"></app-button>
      </div>
    </div>
    <ng-template #noHabits>
      <p class="empty-state">Nenhum hÃ¡bito cadastrado. <a routerLink="/habits">Crie seu primeiro hÃ¡bito!</a></p>
    </ng-template>
  </section>

  <!-- Desafios Ativos -->
  <section class="section">
    <h2>ğŸ† Desafios Ativos</h2>
    <div class="challenge-grid">
      <app-card *ngFor="let challenge of challenges" [title]="challenge.name" icon="âš¡">
        <p>{{ challenge.description || challenge.goal_type }}</p>
        <div class="challenge-reward">
          <span class="mana-reward">+{{ challenge.mana_reward }} Mana</span>
        </div>
      </app-card>
    </div>
  </section>
</div>

<div class="loading" *ngIf="loading">
  <div class="spinner-large"></div>
  <p>Carregando seu painel...</p>
</div>
